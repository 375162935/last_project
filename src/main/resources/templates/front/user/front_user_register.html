<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>修改用户信息 -- 前端</title>
    <link rel="stylesheet" href="/css/app.css">
    <link rel="stylesheet" href="/ordinary/dependencies/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/ordinary/dependencies/meanmenu/css/meanmenu.min.css">
    <link rel="stylesheet" href="/ordinary/dependencies/animate.css/css/animate.min.css">
    <link rel="stylesheet" href="/ordinary/dependencies/magnific-popup/css/magnific-popup.css">
    <link rel="stylesheet" href="/ordinary/dependencies/jquery-animated-headlines/css/jquery.animatedheadline.css">
    <link rel="stylesheet" href="/ordinary/dependencies/owl.carousel/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="/ordinary/dependencies/owl.carousel/css/owl.carousel.min.css">
    <link rel="stylesheet" href="/ordinary/dependencies/flaticon/flaticon.css">

    <!--    <link href="/css/bootstrap.min.css" rel="stylesheet"-->
    <!--          th:href="@{/css/bootstrap.min.css}">-->
    <link href="/css/style.css" rel="stylesheet"
          th:href="@{/css/style.css}">
    <link rel="stylesheet" href="/ordinary/dependencies/fontawesome/css/all.min.css">

    <style>

        #dropdown a:hover {
            background-color: #eee;
        }
    </style>
</head>

<body class="sticky-header">
<!--[if lte IE 9]>
<p class="browserupgrade">您使用的浏览器已<strong>过时</strong>。请
    <a href="https://browsehappy.com/">升级您的浏览器</a>以改善体验和安全性</p>
<![endif]-->
<!-- ScrollUp Start Here -->
<a href="#wrapper" data-type="section-switch" class="scrollup">
    <i class="fas fa-angle-double-up"></i>
</a>
<!-- ScrollUp End Here -->
<!-- Preloader Start Here -->
<div id="preloader"></div>
<!-- Preloader End Here -->
<div id="wrapper" class="wrapper">
    <!--=====================================-->
    <!--=            Header Start           =-->
    <!--=====================================-->
    <div th:replace="front/common/front_header :: .front_header"></div>
    <!--=====================================-->
    <!--=          Search Box Start         =-->
    <!--=====================================-->
    <section class="inner-page-banner" data-bg-image="/ordinary/media/banner/banner1.jpg">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="breadcrumbs-area">
                        <h1>注册</h1>
                        <ul>
                            <li>注册</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--=====================================-->
    <!--=        Account Page Start      	=-->
    <!--=====================================-->
    <section class="section-padding-equal-70">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 sidebar-break-sm sidebar-widget-area mt-0">
                    <div class="widget-bottom-margin widget-account-menu widget-light-bg">
                        <div th:replace="front/common/front_aside :: .front_aside"></div>
                    </div>
                </div>
                <div class="col-lg-9" th:if="${session.user!=null}">
                    <div class="tab-content">
                        <div id="logout" role="tabpanel">
                            <div class="myaccount-login-form light-shadow-bg">
                                <div class="light-box-content">
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="form-box registration-form">
                                                <h3 class="item-title">注册</h3>
                                                <form method="post" action="#" class="site-form">
                                                    <div class="form-group register_username">
                                                        <label for="username" id="username_text">用户名*</label>
                                                        <input type="text" class="form-control" name="username"
                                                               id="username"
                                                               placeholder="请输入您的账号"/>
                                                    </div>
                                                    <div class="form-group register_password">
                                                        <label for="password" id="password_text">密码*</label>
                                                        <input type="text" class="form-control" name="password"
                                                               id="password"
                                                               placeholder="请输入您的密码"/>
                                                    </div>
                                                    <div class="form-group register_true_password">
                                                        <label for="true_password" id="true_password_text">确认密码*</label>
                                                        <input type="text" class="form-control" name="true_password"
                                                               id="true_password"
                                                               placeholder="请再次输入您的密码"/>
                                                    </div>
                                                    <div class="form-group register_name">
                                                        <label for="name" id="name_text">姓名*</label>
                                                        <input type="text" class="form-control" name="name" id="name"
                                                               placeholder="输入您的姓名">
                                                    </div>
                                                    <div class="form-group register_gender gender_form">
                                                        <label for="gender" id="gender_text">性别*</label>
                                                        <div class="gender_form_div">
                                                            <select class="form-control" id="gender" name="gender"
                                                                    size="1">
                                                                <option value="2"></option>
                                                                <option value="0">女</option>
                                                                <option value="1">男</option>
                                                            </select>
                                                        </div>
                                                    </div>
                                                    <div class="form-group register_birthday">
                                                        <label for="birthday" id="birthday_text">生日*</label>
                                                        <input class="form-control js-datepicker m-b-10" type="text"
                                                               id="birthday"
                                                               name="birthday" placeholder="yyyy-mm-dd"
                                                               data-date-format="yyyy-mm-dd"/>

                                                    </div>
                                                    <div class="form-group register_phone">
                                                        <label for="userPhone" id="phone_text">联系方式*</label>
                                                        <input type="text" class="form-control" name="userPhone"
                                                               id="userPhone">
                                                    </div>
                                                    <button type="button" class="btn btn-primary btn_login">保存</button>
                                                    <button type="button" class="btn btn-default"
                                                            onclick="javascript:history.back(-1);return false;">返 回
                                                    </button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
</body>
<script src="/ordinary/dependencies/jquery/js/jquery.min.js"></script>
<script src="/ordinary/dependencies/popper.js/js/popper.min.js"></script>
<script src="/ordinary/dependencies/bootstrap/js/bootstrap.min.js"></script>
<script src="/ordinary/dependencies/waypoints/js/jquery.waypoints.min.js"></script>
<script src="/ordinary/dependencies/jquery.counterup/js/jquery.counterup.min.js"></script>
<script src="/ordinary/dependencies/owl.carousel/js/owl.carousel.min.js"></script>
<script src="/ordinary/dependencies/imagesloaded/js/imagesloaded.pkgd.min.js"></script>
<script src="/ordinary/dependencies/isotope-layout/js/isotope.pkgd.min.js"></script>
<script src="/ordinary/dependencies/jquery-animated-headlines/js/jquery.animatedheadline.min.js"></script>
<script src="/ordinary/dependencies/magnific-popup/js/jquery.magnific-popup.min.js"></script>
<script src="/ordinary/dependencies/elevatezoom/js/jquery.elevateZoom-2.2.3.min.js"></script>
<script src="/ordinary/dependencies/bootstrap-validator/js/validator.min.js"></script>
<script src="/ordinary/dependencies/meanmenu/js/jquery.meanmenu.min.js"></script>
<script src="/ordinary/assets/js/app.js"></script>
<script src="https://ditu.google.cn/maps/api/js?key=AIzaSyBtmXSwv4YmAKtcZyyad9W7D4AC08z0Rb4"></script>
<script>
    $(function () {
        $(".active").removeClass("active");
        $(".front_register").addClass("active");

        var username = $("input[name=username]");
        var password = $("input[name=password]");
        var true_password = $("input[name=true_password]");
        var name = $("input[name=name]");
        var gender = $("select[name=gender]");
        var birthday = $("input[name=birthday]");
        var userPhone = $("input[name=userPhone]");
        var username_flag = false;
        var password_flag = false;
        var true_password_flag = false;
        var name_flag = false;
        var birthday_flag = false;
        var userPhone_flag = false;
        username.blur(function () {
            $("#username_i").remove();
            if (username.val() == "") {
                $("#username_text").after("<i id='username_i' style='color: red'>-----账号不能为空-----<i/>");
                $(".register_username").removeClass("has-success").addClass("has-warning");
                username_flag = false;
            } else {
                $.ajax({
                    url: "/user/judgeUsername",
                    type: "post",
                    dataType: "json",
                    data: {
                        username: username.val()
                    }, success: function (data) {
                        if (data.result == "0") {
                            $("#username_text").after("<i id='username_i' style='color: red'>-----账号已注册-----<i/>");
                            $(".register_username").removeClass("has-success").addClass("has-warning");
                            username_flag = false;
                        } else {
                            $(".register_username").removeClass("has-warning").addClass("has-success");
                            username_flag = true;
                        }
                    }
                })
            }
        })
        password.blur(function () {
            $("#password_i").remove();
            if (password.val() == "") {
                $("#password_text").after("<i id='password_i' style='color: red'>-----密码不能为空-----<i/>");
                $(".register_password").removeClass("has-success").addClass("has-warning");
                password_flag = false;
            } else {
                $(".register_password").removeClass("has-warning").addClass("has-success");
                password_flag = true;
            }
        })
        true_password.blur(function () {
            $("#true_password_i").remove();
            if (true_password.val() == "") {
                $("#true_password_text").after("<i id='true_password_i' style='color: red'>-----确认密码不能为空-----<i/>");
                $(".register_true_password").removeClass("has-success").addClass("has-warning");
                true_password_flag = false;
            } else {
                if (password.val() != true_password.val()) {
                    $("#true_password_text").after("<i id='true_password_i' style='color: red'>-----确认密码与密码不同-----<i/>");
                    $(".register_true_password").removeClass("has-success").addClass("has-warning");
                    true_password_flag = false;
                } else {
                    $(".register_true_password").removeClass("has-warning").addClass("has-success");
                    true_password_flag = true;
                }
            }
        })
        name.blur(function () {
            $("#name_i").remove();
            if (name.val() == "") {
                $("#name_text").after("<i id='name_i' style='color: red'>-----姓名不能为空-----<i/>");
                $(".register_name").removeClass("has-success").addClass("has-warning");
                name_flag = false;
            } else {
                $(".register_name").removeClass("has-warning").addClass("has-success");
                name_flag = true;
            }
        })
        birthday.blur(function () {
            $("#birthday_i").remove();
            if (birthday.val() == "") {
                $("#birthday_text").after("<i id='birthday_i' style='color: red'>-----请填写您的生日-----<i/>");
                $(".register_birthday").removeClass("has-success").addClass("has-warning");
                birthday_flag = false;
            } else {
                $(".register_birthday").removeClass("has-warning").addClass("has-success");
                birthday_flag = true;
            }
        })
        userPhone.blur(function () {
            $("#phone_i").remove();
            if (userPhone.val() == "") {
                $("#phone_text").after("<i id='phone_i' style='color: red'>-----请填写您的联系方式-----<i/>");
                $(".register_phone").removeClass("has-success").addClass("has-warning");
                userPhone_flag = false;
            } else {
                $(".register_phone").removeClass("has-warning").addClass("has-success");
                userPhone_flag = true;
            }
        })
        $(".btn_login").click(function () {
            if (username_flag && password_flag && name_flag && birthday_flag && userPhone_flag) {
                console.log(username.val())
                console.log(password.val())
                console.log(name.val())
                console.log(gender.val())
                console.log(birthday.val())
                console.log(userPhone.val())
                $.ajax({
                    url: "/user/addUser",
                    type: "post",
                    dataType: "json",
                    data: {
                        username: username.val(),
                        password: password.val(),
                        name: name.val(),
                        gender: gender.val(),
                        birthday: birthday.val(),
                        userPhone: userPhone.val()
                    }, success: function (data) {
                        if (data.result == "0") {
                            alert("注册失败")
                        } else {
                            alert("返回主页登录")
                            window.location.href = "/user/clocloseUserse"
                        }
                    }
                })
            } else {
                alert("请先完善信息")
            }
        })
    })
</script>
</html>