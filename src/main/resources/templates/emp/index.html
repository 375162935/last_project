<!DOCTYPE html>
<html lang="zh" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
    <title>首页 -- 后端</title>
    <link rel="icon" href="favicon.ico" type="image/ico">


    <meta name="author" content="yinqi">
    <link href="/css/bootstrap.min.css" rel="stylesheet"
          th:href="@{/css/bootstrap.min.css}">
    <link href="/css/materialdesignicons.min.css" rel="stylesheet"
          th:href="@{/css/materialdesignicons.min.css}">
    <link href="/css/style.css" rel="stylesheet"
          th:href="@{/css/style.css}">
</head>

<body data-logobg="color_8" data-sidebarbg="color_8">
<div class="layout-web">
    <div class="layout-container">
        <!--左侧导航-->
        <div th:replace="common/common_aside :: .layout-sidebar"></div>
        <!--End 左侧导航-->

        <!--头部信息-->
        <div th:replace="common/common_header :: .layout-header"></div>
        <!--End 头部信息-->

        <!--页面主要内容-->
        <main class="layout-content">

            <div class="container-fluid"
                 th:if="${session.user_type=='2'}">

                <div class="row">
                    <div class="col-sm-6 col-lg-3">
                        <div class="card bg-primary">
                            <div class="card-body clearfix">
                                <div class="pull-right">
                                    <p class="h6 text-white m-t-0">今日盈利</p>
                                    <p class="h3 text-white m-b-0" th:text="${dayProfit}">102,125.00</p>
                                </div>
                                <div class="pull-left"> <span class="img-avatar img-avatar-48 bg-translucent"><i
                                        class="mdi mdi-currency-cny fa-1-5x"></i></span></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-3">
                        <div class="card bg-danger">
                            <div class="card-body clearfix">
                                <div class="pull-right">
                                    <p class="h6 text-white m-t-0">今日交易量</p>
                                    <p class="h3 text-white m-b-0" th:text="${orderByDay.size()}">920,000</p>
                                </div>
                                <div class="pull-left"> <span class="img-avatar img-avatar-48 bg-translucent"><i
                                        class="mdi mdi-comment-outline fa-1-5x"></i></span></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-3">
                        <div class="card bg-success">
                            <div class="card-body clearfix">
                                <div class="pull-right">
                                    <p class="h6 text-white m-t-0">本周盈利</p>
                                    <p class="h3 text-white m-b-0" th:text="${weekProfit}">34,005,000</p>
                                </div>
                                <div class="pull-left"> <span class="img-avatar img-avatar-48 bg-translucent"><i
                                        class="mdi mdi-currency-cny fa-1-5x"></i></span></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-3">
                        <div class="card bg-purple">
                            <div class="card-body clearfix">
                                <div class="pull-right">
                                    <p class="h6 text-white m-t-0">本周交易量</p>
                                    <p class="h3 text-white m-b-0" th:text="${orderByWeek.size()}">153 条</p>
                                </div>
                                <div class="pull-left"> <span class="img-avatar img-avatar-48 bg-translucent"><i
                                        class="mdi mdi-comment-outline fa-1-5x"></i></span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">

                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                <h4>本周交易资金</h4>
                            </div>
                            <div class="card-body">
                                <input type="hidden" id="week_order" th:value="${dayByWeekMap}">
                                <canvas class="js-chartjs-bars"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-header">
                                <h4>今年交易资金</h4>
                            </div>
                            <div class="card-body">
                                <input type="hidden" id="year_order" th:value="${monthMap}">
                                <canvas class="js-chartjs-lines"></canvas>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row">
                    <div class="col-sm-6 col-lg-3">
                        <div class="card bg-primary">
                            <div class="card-body clearfix">
                                <div class="pull-right">
                                    <p class="h6 text-white m-t-0">本月盈利</p>
                                    <p class="h3 text-white m-b-0" th:text="${monthProfit}">102,125.00</p>
                                </div>
                                <div class="pull-left"> <span class="img-avatar img-avatar-48 bg-translucent"><i
                                        class="mdi mdi-currency-cny fa-1-5x"></i></span></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-3">
                        <div class="card bg-danger">
                            <div class="card-body clearfix">
                                <div class="pull-right">
                                    <p class="h6 text-white m-t-0">本月交易量</p>
                                    <p class="h3 text-white m-b-0" th:text="${orderByMonth.size()}">920,000</p>
                                </div>
                                <div class="pull-left"> <span class="img-avatar img-avatar-48 bg-translucent"><i
                                        class="mdi mdi-comment-outline fa-1-5x"></i></span></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-3">
                        <div class="card bg-success">
                            <div class="card-body clearfix">
                                <div class="pull-right">
                                    <p class="h6 text-white m-t-0">今年盈利</p>
                                    <p class="h3 text-white m-b-0" th:text="${yearProfit}">34,005,000</p>
                                </div>
                                <div class="pull-left"> <span class="img-avatar img-avatar-48 bg-translucent"><i
                                        class="mdi mdi-currency-cny fa-1-5x"></i></span></div>
                            </div>
                        </div>
                    </div>

                    <div class="col-sm-6 col-lg-3">
                        <div class="card bg-purple">
                            <div class="card-body clearfix">
                                <div class="pull-right">
                                    <p class="h6 text-white m-t-0">今年交易量</p>
                                    <p class="h3 text-white m-b-0" th:text="${orderByYear.size()}">153 条</p>
                                </div>
                                <div class="pull-left"> <span class="img-avatar img-avatar-48 bg-translucent"><i
                                        class="mdi mdi-comment-outline fa-1-5x"></i></span></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">

                    <!--                    <div class="col-lg-12">-->
                    <!--                        <div class="card">-->
                    <!--                            <div class="card-header">-->
                    <!--                                <h4>项目信息</h4>-->
                    <!--                            </div>-->
                    <!--                            <div class="card-body">-->
                    <!--                                <div class="table-responsive">-->
                    <!--                                    <table class="table table-hover">-->
                    <!--                                        <thead>-->
                    <!--                                        <tr>-->
                    <!--                                            <th>#</th>-->
                    <!--                                            <th>项目名称</th>-->
                    <!--                                            <th>开始日期</th>-->
                    <!--                                            <th>截止日期</th>-->
                    <!--                                            <th>状态</th>-->
                    <!--                                            <th>进度</th>-->
                    <!--                                        </tr>-->
                    <!--                                        </thead>-->
                    <!--                                        <tbody>-->
                    <!--                                        <tr>-->
                    <!--                                            <td>1</td>-->
                    <!--                                            <td>设计新主题</td>-->
                    <!--                                            <td>10/02/2019</td>-->
                    <!--                                            <td>12/05/2019</td>-->
                    <!--                                            <td><span class="label label-warning">待定</span></td>-->
                    <!--                                            <td>-->
                    <!--                                                <div class="progress progress-striped progress-sm">-->
                    <!--                                                    <div class="progress-bar progress-bar-warning"-->
                    <!--                                                         style="width: 45%;"></div>-->
                    <!--                                                </div>-->
                    <!--                                            </td>-->
                    <!--                                        </tr>-->
                    <!--                                        <tr>-->
                    <!--                                            <td>2</td>-->
                    <!--                                            <td>网站重新设计</td>-->
                    <!--                                            <td>01/03/2019</td>-->
                    <!--                                            <td>12/04/2019</td>-->
                    <!--                                            <td><span class="label label-success">进行中</span></td>-->
                    <!--                                            <td>-->
                    <!--                                                <div class="progress progress-striped progress-sm">-->
                    <!--                                                    <div class="progress-bar progress-bar-success"-->
                    <!--                                                         style="width: 30%;"></div>-->
                    <!--                                                </div>-->
                    <!--                                            </td>-->
                    <!--                                        </tr>-->
                    <!--                                        <tr>-->
                    <!--                                            <td>3</td>-->
                    <!--                                            <td>模型设计</td>-->
                    <!--                                            <td>10/10/2019</td>-->
                    <!--                                            <td>12/11/2019</td>-->
                    <!--                                            <td><span class="label label-warning">待定</span></td>-->
                    <!--                                            <td>-->
                    <!--                                                <div class="progress progress-striped progress-sm">-->
                    <!--                                                    <div class="progress-bar progress-bar-warning"-->
                    <!--                                                         style="width: 25%;"></div>-->
                    <!--                                                </div>-->
                    <!--                                            </td>-->
                    <!--                                        </tr>-->
                    <!--                                        <tr>-->
                    <!--                                            <td>4</td>-->
                    <!--                                            <td>后台管理系统模板设计</td>-->
                    <!--                                            <td>25/01/2019</td>-->
                    <!--                                            <td>09/05/2019</td>-->
                    <!--                                            <td><span class="label label-success">进行中</span></td>-->
                    <!--                                            <td>-->
                    <!--                                                <div class="progress progress-striped progress-sm">-->
                    <!--                                                    <div class="progress-bar progress-bar-success"-->
                    <!--                                                         style="width: 55%;"></div>-->
                    <!--                                                </div>-->
                    <!--                                            </td>-->
                    <!--                                        </tr>-->
                    <!--                                        <tr>-->
                    <!--                                            <td>5</td>-->
                    <!--                                            <td>前端设计</td>-->
                    <!--                                            <td>10/10/2019</td>-->
                    <!--                                            <td>12/12/2019</td>-->
                    <!--                                            <td><span class="label label-danger">未开始</span></td>-->
                    <!--                                            <td>-->
                    <!--                                                <div class="progress progress-striped progress-sm">-->
                    <!--                                                    <div class="progress-bar progress-bar-danger"-->
                    <!--                                                         style="width: 0%;"></div>-->
                    <!--                                                </div>-->
                    <!--                                            </td>-->
                    <!--                                        </tr>-->
                    <!--                                        <tr>-->
                    <!--                                            <td>6</td>-->
                    <!--                                            <td>桌面软件测试</td>-->
                    <!--                                            <td>10/01/2019</td>-->
                    <!--                                            <td>29/03/2019</td>-->
                    <!--                                            <td><span class="label label-success">进行中</span></td>-->
                    <!--                                            <td>-->
                    <!--                                                <div class="progress progress-striped progress-sm">-->
                    <!--                                                    <div class="progress-bar progress-bar-success"-->
                    <!--                                                         style="width: 75%;"></div>-->
                    <!--                                                </div>-->
                    <!--                                            </td>-->
                    <!--                                        </tr>-->
                    <!--                                        <tr>-->
                    <!--                                            <td>7</td>-->
                    <!--                                            <td>APP改版开发</td>-->
                    <!--                                            <td>25/02/2019</td>-->
                    <!--                                            <td>12/05/2019</td>-->
                    <!--                                            <td><span class="label label-danger">暂停</span></td>-->
                    <!--                                            <td>-->
                    <!--                                                <div class="progress progress-striped progress-sm">-->
                    <!--                                                    <div class="progress-bar progress-bar-danger"-->
                    <!--                                                         style="width: 15%;"></div>-->
                    <!--                                                </div>-->
                    <!--                                            </td>-->
                    <!--                                        </tr>-->
                    <!--                                        <tr>-->
                    <!--                                            <td>8</td>-->
                    <!--                                            <td>Logo设计</td>-->
                    <!--                                            <td>10/02/2019</td>-->
                    <!--                                            <td>01/03/2019</td>-->
                    <!--                                            <td><span class="label label-warning">完成</span></td>-->
                    <!--                                            <td>-->
                    <!--                                                <div class="progress progress-striped progress-sm">-->
                    <!--                                                    <div class="progress-bar progress-bar-success"-->
                    <!--                                                         style="width: 100%;"></div>-->
                    <!--                                                </div>-->
                    <!--                                            </td>-->
                    <!--                                        </tr>-->
                    <!--                                        </tbody>-->
                    <!--                                    </table>-->
                    <!--                                </div>-->
                    <!--                            </div>-->
                    <!--                        </div>-->
                    <!--                    </div>-->

                </div>

            </div>

        </main>
        <!--End 页面主要内容-->
    </div>
</div>

<script type="text/javascript" src="/js/jquery.min.js"
        th:src="@{/js/jquery.min.js}"></script>
<script type="text/javascript" src="/js/bootstrap.min.js"
        th:src="@{/js/bootstrap.min.js}"></script>
<script type="text/javascript" src="/js/perfect-scrollbar.min.js"
        th:src="@{/js/perfect-scrollbar.min.js}"></script>
<script type="text/javascript" src="/js/main.js"
        th:src="@{/js/main.js}"></script>
<!--图表插件-->
<script type="text/javascript" src="/js/Chart.js"
        th:src="@{/js/Chart.js}"></script>

<script type="text/javascript">
    $(document).ready(function (e) {
        if ($("#week_order").val() != null) {
            var a = $("#week_order").val().replace(/(^{)|(}$)/g, '').split(",");
            for (var i = 0; i < 7; i++) {
                a[i] = a[i].substr(a[i].lastIndexOf("=") + 1);
            }
            console.log(a)
            var b = $("#year_order").val().replace(/(^{)|(}$)/g, '').split(",");
            for (var i = 0; i < 12; i++) {
                b[i] = b[i].substr(b[i].lastIndexOf("=") + 1);
            }
            console.log(b)
            var $dashChartBarsCnt = jQuery('.js-chartjs-bars')[0].getContext('2d'),
                $dashChartLinesCnt = jQuery('.js-chartjs-lines')[0].getContext('2d');

            var $dashChartBarsData = {
                labels: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                datasets: [
                    {
                        label: '交易金额',
                        borderWidth: 1,
                        borderColor: 'rgba(0,0,0,0)',
                        backgroundColor: 'rgba(51,202,185,0.5)',
                        hoverBackgroundColor: "rgba(51,202,185,0.7)",
                        hoverBorderColor: "rgba(0,0,0,0)",
                        data: [a[0], a[1], a[2], a[3], a[4], a[5], a[6]]
                    }
                ]
            };
            var $dashChartLinesData = {
                labels: ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'],
                datasets: [
                    {
                        label: '交易资金',
                        data: [b[0], b[1], b[2], b[3], b[4], b[5], b[6], b[7], b[8], b[9], b[10], b[11]],
                        borderColor: '#358ed7',
                        backgroundColor: 'rgba(53, 142, 215, 0.175)',
                        borderWidth: 1,
                        fill: false,
                        lineTension: 0.5
                    }
                ]
            };

            new Chart($dashChartBarsCnt, {
                type: 'bar',
                data: $dashChartBarsData
            });

            var myLineChart = new Chart($dashChartLinesCnt, {
                type: 'line',
                data: $dashChartLinesData,
            });
        }
    });
</script>

</html>